<!DOCTYPE html>
<html>
<head>
    <title>数独游戏</title>
    <style>
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
        }

        table {
            border-collapse: collapse;
            border: 3px solid #000;
        }

        td {
            width: 40px;
            height: 40px;
            text-align: center;
            border: 1px solid #999;
            font-size: 20px;
        }

        input {
            width: 100%;
            height: 100%;
            border: 0;
            text-align: center;
            font-size: 20px;
        }

        .fixed {
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .error {
            background-color: #ffcccc;
        }

        .thick-right {
            border-right: 3px solid #000;
        }

        .thick-bottom {
            border-bottom: 3px solid #000;
        }

        button {
            margin: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>数独游戏</h1>
        <table id="sudoku"></table>
        <button onclick="newGame()">新游戏</button>
    </div>

    <script>
        let solution = [];
        let currentPuzzle = [];

        function createBoard() {
            const table = document.getElementById('sudoku');
            table.innerHTML = '';

            for (let i = 0; i < 9; i++) {
                const row = table.insertRow();
                for (let j = 0; j < 9; j++) {
                    const cell = row.insertCell();
                    if ((j + 1) % 3 === 0 && j !== 8) cell.className += ' thick-right';
                    if ((i + 1) % 3 === 0 && i !== 8) cell.className += ' thick-bottom';
                    
                    if (currentPuzzle[i][j] !== 0) {
                        cell.textContent = currentPuzzle[i][j];
                        cell.classList.add('fixed');
                    } else {
                        const input = document.createElement('input');
                        input.maxLength = 1;
                        input.dataset.row = i;
                        input.dataset.col = j;
                        input.addEventListener('input', function(e) {
                            validateInput(this);
                            checkWin();
                        });
                        cell.appendChild(input);
                    }
                }
            }
        }

        function validateInput(input) {
            const value = parseInt(input.value);
            const row = parseInt(input.dataset.row);
            const col = parseInt(input.dataset.col);
            
            input.classList.remove('error');
            
            if (isNaN(value) || value < 1 || value > 9) {
                input.value = '';
                return;
            }

            if (value !== solution[row][col]) {
                input.classList.add('error');
            }
        }

        function checkWin() {
            const inputs = document.querySelectorAll('input');
            for (let input of inputs) {
                if (input.classList.contains('error') || input.value === '') return;
            }
            alert('恭喜！你赢了！');
        }

        function generatePuzzle(difficulty = 0.5) {
            // 这里可以替换为更复杂的生成算法
            // 示例数独
            solution = [
                [5, 3, 4, 6, 7, 8, 9, 1, 2],
                [6, 7, 2, 1, 9, 5, 3, 4, 8],
                [1, 9, 8, 3, 4, 2, 5, 6, 7],
                [8, 5, 9, 7, 6, 1, 4, 2, 3],
                [4, 2, 6, 8, 5, 3, 7, 9, 1],
                [7, 1, 3, 9, 2, 4, 8, 5, 6],
                [9, 6, 1, 5, 3, 7, 2, 8, 4],
                [2, 8, 7, 4, 1, 9, 6, 3, 5],
                [3, 4, 5, 2, 8, 6, 1, 7, 9]
            ];

            currentPuzzle = solution.map(row => 
                row.map(num => Math.random() < difficulty ? 0 : num)
            );
        }

        function newGame() {
            generatePuzzle();
            createBoard();
        }

        // 初始化游戏
        newGame();
    </script>
</body>
</html>
